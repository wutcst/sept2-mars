{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"User\",\n\n  data() {\n    return {\n      form: {},\n      dialogVisible: false,\n      dialogVisible2: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 10,\n      search: '',\n      tableData: []\n    };\n  },\n\n  created() {\n    this.load();\n  },\n\n  methods: {\n    open() {\n      this.$notify({\n        title: '游戏规则说明',\n        message: '巨洞探险：一个精彩的、充满想像力的复杂游戏，包括要在一个复杂的洞穴系统中找到出路、寻找隐藏的财宝、使用暗语和其他一些神秘工具，最终的目的是获得高分。',\n        duration: 4500\n      });\n    },\n\n    load() {\n      request.get(\"/user?pageNum=\" + this.currentPage + \"&pageSize=\" + this.pageSize + \"&search=\" + this.search // eslint-disable-next-line no-unused-vars\n      ).then(res => {\n        this.tableData = res.data.records;\n        this.total = res.data.records.length;\n      });\n    },\n\n    add() {\n      this.dialogVisible = true, this.form = {};\n    },\n\n    adduser() {\n      this.dialogVisible2 = true;\n    },\n\n    //清除对话框中的数据\n    closeAddDialog() {\n      this.dialogVisible = false; //关闭对话框\n      // this.$refs.addRoleForm.resetFields();\n\n      this.form = this.$options.data().form;\n    },\n\n    save() {\n      if (this.form.id) {\n        request.put(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code == \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"更新成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.dialogVisible = false;\n        });\n      } else {\n        request.post(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code == \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"新增成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.form = this.$options.data().form;\n          this.dialogVisible2 = false;\n        });\n      }\n    },\n\n    // eslint-disable-next-line no-unused-vars\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogVisible = true;\n    },\n\n    handleDelete(id) {\n      request.delete(\"/user/\" + id).then(res => {\n        if (res.code == \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n\n        this.load();\n      });\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    handleCurrentChange(pageNum) {\n      this.currentPage = pageNum;\n      this.load();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","form","dialogVisible","dialogVisible2","currentPage","pageSize","total","search","tableData","created","load","methods","open","$notify","title","message","duration","get","then","res","records","length","add","adduser","closeAddDialog","$options","save","id","put","console","log","code","$message","type","msg","post","handleEdit","row","JSON","parse","stringify","handleDelete","delete","handleSizeChange","handleCurrentChange","pageNum"],"sourceRoot":"","sources":["D:\\JLSource\\软工实践2\\mars\\sept2-mars\\前端\\vue-demo01\\src\\views\\User.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <div style=\"margin: 10px 0 ;display: flex\">\n<!--      <el-button type=\"primary\" @click=\"open\">游戏规则说明</el-button>-->\n      <el-button type=\"primary\" @click=\"adduser\">新增用户</el-button>\n<!--      <el-button type=\"primary\">导入</el-button>-->\n<!--      <el-button type=\"primary\">导出</el-button>-->\n    </div>\n<!--    <div style=\"margin: 10px 0 ;display: flex\">-->\n<!--      <el-input v-model=\"search\" placeholder=\"请输入内容\" style=\"width: 20%\" clearable/>-->\n<!--      <el-button type=\"primary\" style=\"margin-left: 5px\">查询</el-button>-->\n<!--    </div>-->\n   <el-table :data=\"tableData\" stripe style=\"width: 100%\" border>\n     <el-table-column prop=\"id\" label=\"ID\" width=\"170\" sortable/>\n     <el-table-column prop=\"name\" label=\"用户名\" width=\"220\" />\n     <el-table-column prop=\"currentroom\" label=\"当前房间\" width=\"220\" />\n     <el-table-column prop=\"gold\" label=\"金币\" width=\"220\" />\n     <el-table-column prop=\"coin\" label=\"硬币\" width=\"220\" />\n     <el-table-column fixed=\"right\" label=\"操作\" width=\"169\">\n       <template #default=\"scope\">\n         <el-button type=\"text\" size=\"small\" @click=\"handleEdit(scope.row)\"\n         >修改</el-button\n         >\n<!--         <el-button type=\"text\" size=\"small\" @click=\"handleEdit2(scope.row)\"-->\n<!--         >编辑</el-button-->\n<!--         >-->\n         <el-popconfirm title=\"确定删除吗?\" @confirm=\"handleDelete(scope.row.id)\">\n           <template #reference>\n             <el-button type=\"text\" size=\"small\">删除</el-button>\n           </template>\n         </el-popconfirm>\n       </template>\n     </el-table-column>\n   </el-table>\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[5, 10, 15, 20]\"\n          :small=\"0\"\n          :disabled=\"false\"\n          :background=\"true\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n    <el-dialog\n        v-model=\"dialogVisible\"\n        title=\"修改\"\n        width=\"30%\"\n        @close=\"closeAddDialog\"\n    >\n      <el-form :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"用户名\" style=\"width: 80%\">\n          <el-input v-model=\"form.name\" />\n        </el-form-item>\n        <el-form-item label=\"当前位置\" style=\"width: 80%\">\n          <el-input v-model=\"form.currentroom\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" style=\"width: 80%\">\n          <el-input v-model=\"form.password\" />\n        </el-form-item>\n        <el-form-item label=\"权限\" style=\"width: 80%\">\n          <el-input v-model=\"form.level\" />\n        </el-form-item>\n        <el-form-item label=\"金币\" style=\"width: 80%\">\n          <el-input v-model=\"form.gold\" />\n        </el-form-item>\n        <el-form-item label=\"硬币\" style=\"width: 80%\">\n          <el-input v-model=\"form.coin\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"closeAddDialog\">取消</el-button>\n        <el-button type=\"primary\" @click=\"save\"\n        >确定</el-button\n        >\n      </span>\n      </template>\n    </el-dialog>\n    <el-dialog\n        v-model=\"dialogVisible2\"\n        title=\"新增用户\"\n        width=\"30%\"\n    ><el-form :model=\"form\" label-width=\"120px\">\n              <el-form-item label=\"用户名\" style=\"width: 80%\">\n                <el-input v-model=\"form.name\" />\n              </el-form-item>\n      <el-form-item label=\"当前位置\" style=\"width: 80%\">\n        <el-input v-model=\"form.currentroom\" />\n      </el-form-item>\n      <el-form-item label=\"金币\" style=\"width: 80%\">\n        <el-input v-model=\"form.gold\" />\n      </el-form-item>\n      <el-form-item label=\"硬币\" style=\"width: 80%\">\n        <el-input v-model=\"form.coin\" />\n      </el-form-item>\n    </el-form>\n      <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible2 = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"save\"\n        >确定</el-button\n        >\n      </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"User\",\n  data(){\n    return{\n      form:{},\n      dialogVisible:false,\n      dialogVisible2:false,\n      currentPage:1,\n      pageSize:10,\n      total:10,\n      search:'',\n      tableData:[]\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods:{\n    open(){\n      this.$notify({\n        title: '游戏规则说明',\n        message: '巨洞探险：一个精彩的、充满想像力的复杂游戏，包括要在一个复杂的洞穴系统中找到出路、寻找隐藏的财宝、使用暗语和其他一些神秘工具，最终的目的是获得高分。',\n        duration: 4500\n      });\n    },\n    load(){\n      request.get(\"/user?pageNum=\"+this.currentPage+\"&pageSize=\"+this.pageSize+\"&search=\"+this.search,\n\n        // eslint-disable-next-line no-unused-vars\n      ).then(res=>{\n        this.tableData=res.data.records\n        this.total=res.data.records.length\n      })\n    },\n    add(){\n        this.dialogVisible=true,\n        this.form={}\n    },\n    adduser(){\n      this.dialogVisible2=true\n    },\n    //清除对话框中的数据\n    closeAddDialog() {\n      this.dialogVisible = false   //关闭对话框\n      // this.$refs.addRoleForm.resetFields();\n      this.form = this.$options.data().form\n    },\n    save(){\n      if(this.form.id){\n        request.put(\"/user\",this.form).then(res => {\n          console.log(res)\n          if(res.code==\"0\"){\n            this.$message({\n              type:\"success\",\n              message:\"更新成功\"\n            })\n          }else {\n            this.$message({\n              type:\"error\",\n              message:res.msg\n            })\n          }\n          this.load()\n          this.dialogVisible=false\n        })\n      }else{\n        request.post(\"/user\",this.form).then(res => {\n          console.log(res)\n          if(res.code==\"0\"){\n            this.$message({\n              type:\"success\",\n              message:\"新增成功\"\n            })\n          }else {\n            this.$message({\n              type:\"error\",\n              message:res.msg\n            })\n          }\n          this.load()\n          this.form = this.$options.data().form\n          this.dialogVisible2=false\n        })\n      }\n    },\n    // eslint-disable-next-line no-unused-vars\n    handleEdit(row){\n      this.form = JSON.parse(JSON.stringify(row))\n      this.dialogVisible = true\n    },\n    handleDelete(id){\n      request.delete(\"/user/\"+id).then(res=>{\n        if(res.code==\"0\"){\n          this.$message({\n            type:\"success\",\n            message:\"删除成功\"\n          })\n        }else {\n          this.$message({\n            type:\"error\",\n            message:res.msg\n          })\n        }\n        this.load()\n      })\n    },\n    handleSizeChange(pageSize){\n      this.pageSize=pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum){\n      this.currentPage=pageNum\n      this.load()\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}