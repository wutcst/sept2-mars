{"ast":null,"code":"import request from \"@/utils/request\";\nimport Header from \"@/components/Header\";\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"User\",\n  components: {\n    Header\n  },\n\n  data() {\n    return {\n      form: {},\n      dialogVisible: false,\n      //修改用户信息窗口\n      dialogVisible2: false,\n      //添加新用户窗口\n      currentPage: 1,\n      //当前页面\n      pageSize: 10,\n      //页面大小\n      total: 10,\n      search: '',\n      tableData: []\n    };\n  },\n\n  created() {\n    this.load();\n  },\n\n  methods: {\n    /**\r\n     * @description 加载页面信息\r\n     * @return void\r\n     * */\n    load() {\n      request.get(\"/user?pageNum=\" + this.currentPage + \"&pageSize=\" + this.pageSize + \"&search=\" + this.search // eslint-disable-next-line no-unused-vars\n      ).then(res => {\n        this.tableData = res.data.records;\n        this.total = res.data.records.length;\n      });\n    },\n\n    /**\r\n     * @description 修改用户信息的窗口\r\n     * @return void\r\n     * */\n    add() {\n      this.dialogVisible = true;\n      this.form = {};\n    },\n\n    /**\r\n     * @description 添加新用户\r\n     * @return void\r\n     * */\n    adduser() {\n      this.dialogVisible2 = true;\n    },\n\n    /**\r\n     * @description 清楚对话框的数据\r\n     * @return void\r\n     * */\n    closeAddDialog() {\n      this.dialogVisible = false; //关闭对话框\n      // this.$refs.addRoleForm.resetFields();\n\n      this.form = this.$options.data().form;\n    },\n\n    /**\r\n     * @description 保存用户信息\r\n     * @return void\r\n     * */\n    save() {\n      if (this.form.id) {\n        request.put(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code === \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"更新成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.dialogVisible = false;\n        });\n      } else {\n        request.post(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code === \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"新增成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.form = this.$options.data().form;\n          this.dialogVisible2 = false;\n        });\n      }\n    },\n\n    /**\r\n     * @description 修改用户信息\r\n     * @return void\r\n     * */\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogVisible = true;\n    },\n\n    /**\r\n     * @description 删除用户\r\n     * @return void\r\n     * */\n    handleDelete(id) {\n      request.delete(\"/user/\" + id).then(res => {\n        if (res.code === \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n\n        this.load();\n      });\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    handleCurrentChange(pageNum) {\n      this.currentPage = pageNum;\n      this.load();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","Header","name","components","data","form","dialogVisible","dialogVisible2","currentPage","pageSize","total","search","tableData","created","load","methods","get","then","res","records","length","add","adduser","closeAddDialog","$options","save","id","put","console","log","code","$message","type","message","msg","post","handleEdit","row","JSON","parse","stringify","handleDelete","delete","handleSizeChange","handleCurrentChange","pageNum"],"sourceRoot":"","sources":["D:\\JLSource\\软工实践2\\sept2-mars\\前端\\vue-demo01\\src\\views\\User.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Header />\r\n  </div>\r\n\r\n  <div style=\"padding: 10px\">\r\n    <div style=\"margin: 10px 0 ;display: flex\">\r\n      <el-button type=\"primary\" @click=\"adduser\">新增用户</el-button>\r\n    </div>\r\n   <el-table :data=\"tableData\" stripe style=\"width: 100%\" border>\r\n     <el-table-column prop=\"id\" label=\"ID\" width=\"170\" sortable/>\r\n     <el-table-column prop=\"name\" label=\"用户名\" width=\"220\" />\r\n     <el-table-column prop=\"currentroom\" label=\"当前房间\" width=\"220\" />\r\n     <el-table-column prop=\"gold\" label=\"金币\" width=\"250\" />\r\n     <el-table-column prop=\"coin\" label=\"硬币\" width=\"250\" />\r\n     <el-table-column fixed=\"right\" label=\"操作\" width=\"350\">\r\n       <template #default=\"scope\">\r\n         <el-button type=\"text\" size=\"small\" @click=\"handleEdit(scope.row)\"\r\n         >修改</el-button\r\n         >\r\n<!--         <el-button type=\"text\" size=\"small\" @click=\"handleEdit2(scope.row)\"-->\r\n<!--         >编辑</el-button-->\r\n<!--         >-->\r\n         <el-popconfirm title=\"确定删除吗?\" @confirm=\"handleDelete(scope.row.id)\">\r\n           <template #reference>\r\n             <el-button type=\"text\" size=\"small\">删除</el-button>\r\n           </template>\r\n         </el-popconfirm>\r\n       </template>\r\n     </el-table-column>\r\n   </el-table>\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n          v-model:currentPage=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[5, 10, 15, 20]\"\r\n          :small=\"0\"\r\n          :disabled=\"false\"\r\n          :background=\"true\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n    <el-dialog\r\n        v-model=\"dialogVisible\"\r\n        title=\"修改\"\r\n        width=\"30%\"\r\n        @close=\"closeAddDialog\"\r\n    >\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"用户名\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"当前位置\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.currentroom\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.password\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.level\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"金币\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.gold\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"体力\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.coin\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"closeAddDialog\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确定</el-button>\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n    <el-dialog\r\n        v-model=\"dialogVisible2\"\r\n        title=\"新增用户\"\r\n        width=\"30%\"\r\n    ><el-form :model=\"form\" label-width=\"120px\">\r\n      <el-form-item label=\"用户名\" style=\"width: 80%\">\r\n        <el-input v-model=\"form.name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" style=\"width: 80%\">\r\n        <el-input v-model=\"form.password\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"当前位置\" style=\"width: 80%\">\r\n        <el-input v-model=\"form.currentroom\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"金币\" style=\"width: 80%\">\r\n        <el-input v-model=\"form.gold\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"体力\" style=\"width: 80%\">\r\n        <el-input v-model=\"form.coin\" />\r\n      </el-form-item>\r\n    </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible2 = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\"\r\n        >确定</el-button\r\n        >\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport Header from \"@/components/Header\";\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"User\",\r\n  components: {Header},\r\n  data(){\r\n    return{\r\n      form:{},\r\n      dialogVisible:false, //修改用户信息窗口\r\n      dialogVisible2:false, //添加新用户窗口\r\n      currentPage:1, //当前页面\r\n      pageSize:10, //页面大小\r\n      total:10,\r\n      search:'',\r\n      tableData:[]\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods:{\r\n    /**\r\n     * @description 加载页面信息\r\n     * @return void\r\n     * */\r\n    load(){\r\n      request.get(\"/user?pageNum=\"+this.currentPage+\"&pageSize=\"+this.pageSize+\"&search=\"+this.search,\r\n\r\n        // eslint-disable-next-line no-unused-vars\r\n      ).then(res=>{\r\n        this.tableData=res.data.records\r\n        this.total=res.data.records.length\r\n      })\r\n    },\r\n    /**\r\n     * @description 修改用户信息的窗口\r\n     * @return void\r\n     * */\r\n    add(){\r\n        this.dialogVisible=true\r\n        this.form={}\r\n    },\r\n    /**\r\n     * @description 添加新用户\r\n     * @return void\r\n     * */\r\n    adduser(){\r\n      this.dialogVisible2=true\r\n    },\r\n    /**\r\n     * @description 清楚对话框的数据\r\n     * @return void\r\n     * */\r\n    closeAddDialog() {\r\n      this.dialogVisible = false   //关闭对话框\r\n      // this.$refs.addRoleForm.resetFields();\r\n      this.form = this.$options.data().form\r\n    },\r\n    /**\r\n     * @description 保存用户信息\r\n     * @return void\r\n     * */\r\n    save(){\r\n      if(this.form.id){\r\n        request.put(\"/user\",this.form).then(res => {\r\n          console.log(res)\r\n          if(res.code===\"0\"){\r\n            this.$message({\r\n              type:\"success\",\r\n              message:\"更新成功\"\r\n            })\r\n          }else {\r\n            this.$message({\r\n              type:\"error\",\r\n              message:res.msg\r\n            })\r\n          }\r\n          this.load()\r\n          this.dialogVisible=false\r\n        })\r\n      }else{\r\n        request.post(\"/user\",this.form).then(res => {\r\n          console.log(res)\r\n          if(res.code===\"0\"){\r\n            this.$message({\r\n              type:\"success\",\r\n              message:\"新增成功\"\r\n            })\r\n          }else {\r\n            this.$message({\r\n              type:\"error\",\r\n              message:res.msg\r\n            })\r\n          }\r\n          this.load()\r\n          this.form = this.$options.data().form\r\n          this.dialogVisible2=false\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @description 修改用户信息\r\n     * @return void\r\n     * */\r\n    handleEdit(row){\r\n      this.form = JSON.parse(JSON.stringify(row))\r\n      this.dialogVisible = true\r\n    },\r\n    /**\r\n     * @description 删除用户\r\n     * @return void\r\n     * */\r\n    handleDelete(id){\r\n      request.delete(\"/user/\"+id).then(res=>{\r\n        if(res.code===\"0\"){\r\n          this.$message({\r\n            type:\"success\",\r\n            message:\"删除成功\"\r\n          })\r\n        }else {\r\n          this.$message({\r\n            type:\"error\",\r\n            message:res.msg\r\n          })\r\n        }\r\n        this.load()\r\n      })\r\n    },\r\n    handleSizeChange(pageSize){\r\n      this.pageSize=pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum){\r\n      this.currentPage=pageNum\r\n      this.load()\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}