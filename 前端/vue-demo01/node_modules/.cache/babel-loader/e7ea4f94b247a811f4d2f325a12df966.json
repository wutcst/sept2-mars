{"ast":null,"code":"import { Avatar, Lock } from '@element-plus/icons-vue';\nimport { ElMessage } from \"element-plus\";\nimport request from \"@/utils/request\";\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Login\",\n  components: {\n    Avatar,\n    Lock\n  },\n\n  data() {\n    return {\n      form: {},\n      level: 2,\n      dialogVisible_register: false,\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入昵称',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 80,\n          message: '长度在一到八十位之间',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 10,\n          message: '长度在六到八位之间',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    login() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          request.post(\"http://localhost:9090/user/login?name=\" + this.form.name + \"&password=\" + this.form.password).then(res => {\n            if (res.code === '0') {\n              ElMessage({\n                message: '登录成功',\n                type: 'success'\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n\n              this.level = res.data.level;\n              if (this.level === 1) this.$router.push(\"/User\"); // 页面跳转\n              else if (this.level === 2) this.$router.push(\"/Game\"); // 页面跳转\n            } else {\n              ElMessage({\n                message: res.msg,\n                type: 'error'\n              });\n            }\n          });\n        }\n      });\n    },\n\n    register() {\n      this.dialogVisible_register = true;\n    },\n\n    save() {\n      if (this.form.id) {\n        request.put(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code === \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"更新成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.dialogVisible_register = false;\n        });\n      } else {\n        request.post(\"/user\", this.form).then(res => {\n          console.log(res);\n\n          if (res.code === \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"新增成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n\n          this.load();\n          this.form = this.$options.data().form;\n          this.dialogVisible2 = false;\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["Avatar","Lock","ElMessage","request","name","components","data","form","level","dialogVisible_register","rules","required","message","trigger","min","max","password","methods","login","$refs","validate","valid","post","then","res","code","type","sessionStorage","setItem","JSON","stringify","$router","push","msg","register","save","id","put","console","log","$message","load","$options","dialogVisible2"],"sourceRoot":"","sources":["D:\\JLSource\\软工实践2\\sept2-mars\\前端\\vue-demo01\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 100%;height: 100vh; background-color: lightcyan; overflow: hidden\" >\r\n    <div style=\"width: 400px;margin: 150px auto\">\r\n      <div style=\"color: aliceblue;font-size: 25px;font-family: 黑体;color:black; text-align: center;padding: 30px 0\">欢迎登录巨洞探险游戏</div>\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"40px\" :rules=\"rules\">\r\n        <el-form-item prop=\"name\" style=\"margin-left: 40px;margin-right: 40px;\">\r\n          <el-input placeholder=\"请输入用户名\" v-model=\"form.name\">\r\n            <template>\r\n              <el-icon style=\"margin-top: 13px\"><Avatar /></el-icon>\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\" style=\"margin-left: 40px;margin-right: 40px;\">\r\n          <el-input placeholder=\"请输入密码\"\r\n                    icon=\"el-icon-search\" v-model=\"form.password\" show-password>\r\n            <template>\r\n              <el-icon style=\"margin-top: 13px\"><Lock /></el-icon>\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"margin-left: 40px;margin-right: 40px;\">\r\n          <el-button style=\"width: 100%;font-size: 20px\" type=\"primary\" @click=\"register\">注 册</el-button>\r\n        </el-form-item>\r\n        <el-form-item style=\"margin-left: 40px;margin-right: 40px;\">\r\n          <el-button style=\"width: 100%;font-size: 20px\" type=\"primary\" @click=\"login\">登 录</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div>\r\n      <el-dialog\r\n          v-model=\"dialogVisible_register\"\r\n          title=\"注册\"\r\n          width=\"30%\"\r\n      ><el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"用户名\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" style=\"width: 80%\">\r\n          <el-input v-model=\"form.password\" />\r\n        </el-form-item>\r\n      </el-form>\r\n        <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible_register = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\"\r\n        >确定</el-button\r\n        >\r\n      </span>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {Avatar,Lock} from '@element-plus/icons-vue'\r\nimport {ElMessage} from \"element-plus\";\r\nimport request from \"@/utils/request\";\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"Login\",\r\n  components: {\r\n    Avatar,\r\n    Lock\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      level: 2,\r\n      dialogVisible_register: false,\r\n      rules: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: '请输入昵称',\r\n            trigger: 'blur',\r\n          },\r\n          {\r\n            min: 1,\r\n            max: 80,\r\n            message: '长度在一到八十位之间',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: '请输入密码',\r\n            trigger: 'blur',\r\n          }\r\n          ,\r\n          {\r\n            min: 1,\r\n            max: 10,\r\n            message: '长度在六到八位之间',\r\n            trigger: 'blur',\r\n          },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          request.post(\"http://localhost:9090/user/login?name=\"+this.form.name+\"&password=\"+this.form.password).then(res =>{\r\n            if(res.code === '0'){\r\n              ElMessage({\r\n                message: '登录成功',\r\n                type: 'success'\r\n              })\r\n              sessionStorage.setItem(\"user\",JSON.stringify(res.data)) //缓存用户信息\r\n              this.level = res.data.level\r\n              if(this.level === 1)\r\n                this.$router.push(\"/User\") // 页面跳转\r\n              else if(this.level === 2)\r\n                this.$router.push(\"/Game\") // 页面跳转\r\n            }else{\r\n              ElMessage({\r\n                message: res.msg,\r\n                type: 'error'\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    register(){\r\n      this.dialogVisible_register=true\r\n    },\r\n    save(){\r\n      if(this.form.id){\r\n        request.put(\"/user\",this.form).then(res => {\r\n          console.log(res)\r\n          if(res.code===\"0\"){\r\n            this.$message({\r\n              type:\"success\",\r\n              message:\"更新成功\"\r\n            })\r\n          }else {\r\n            this.$message({\r\n              type:\"error\",\r\n              message:res.msg\r\n            })\r\n          }\r\n          this.load()\r\n          this.dialogVisible_register=false\r\n        })\r\n      }else{\r\n        request.post(\"/user\",this.form).then(res => {\r\n          console.log(res)\r\n          if(res.code===\"0\"){\r\n            this.$message({\r\n              type:\"success\",\r\n              message:\"新增成功\"\r\n            })\r\n          }else {\r\n            this.$message({\r\n              type:\"error\",\r\n              message:res.msg\r\n            })\r\n          }\r\n          this.load()\r\n          this.form = this.$options.data().form\r\n          this.dialogVisible2=false\r\n        })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}